# 軌跡規格：快捷動作側欄與直覺式資產管理 (quick_action_sidebar_20260115)

## 1. 概述 (Overview)
此軌跡旨在大幅提升編輯效率與客製化便利性。我們將在編輯器左側引入一個可收合的「快捷動作列 (Quick Action Sidebar)」，並整合「拖放式 (Drag & Drop) 圖片管理系統」，讓使用者無需記憶繁瑣語法即可完成高品質簡報。

## 2. 功能需求 (Functional Requirements)

### 2.1 快捷動作側欄 (Quick Action Sidebar)
- **介面設計**：位於編輯器最左側的細長欄位，支援「展開/收合」混合模式。
- **一鍵插入功能**：
    - **投影片結構**：插入 `===` 分隔符號及預設 YAML 模板。
    - **佈局模版**：快速套用 `grid`, `center`, `quote`, `alert` 佈局。
    - **進階元件**：插入 `::: table-modern`, `::: mermaid`, `Note:`。
    - **文字樣式**：選取文字後一鍵套用粗體、斜體、行內代碼。

### 2.2 拖放式圖片管理 (Drag & Drop Assets)
- **自動 Base64 轉換**：將圖片拖入編輯器時，自動讀取並轉換為 Base64 字串。
- **智慧語法插入**：自動插入 `![|](data:image/...)`，並將游標聚焦於 `|` 所在位置 (Alt Text)。
- **背景圖快速設定**：將圖片拖至預覽區的特定投影片上，自動識別該頁並更新 YAML 中的 `bgImage` 欄位。

### 2.3 編輯器整合 (Editor Integration)
- **Monaco Editor 聯動**：側欄動作必須與 Monaco Editor 的實例狀態同步，確保插入內容正確反映在當前游標位置。

## 3. 非功能需求 (Non-Functional Requirements)
- **零 AI 依賴**：所有功能均透過靜態邏輯與 React 狀態管理實現。
- **響應式空間**：側欄收合時，編輯器應自動填滿剩餘寬度。

## 4. 驗收標準 (Acceptance Criteria)
- [ ] 使用者點擊側欄按鈕能正確在游標處插入 Markdown 語法。
- [ ] 圖片拖入編輯器後，能即時轉換為 Base64 並正確顯示於預覽區。
- [ ] 將圖片拖至預覽區投影片後，該頁的 YAML `bgImage` 被正確修改。
- [ ] 側欄能自由切換展開與收合狀態，不影響編輯器效能。

## 5. 超出範圍 (Out of Scope)
- 多重圖片批次上傳（初期僅支援單張拖放）。
- 快捷鍵自定義（僅提供視覺按鈕）。
